{% load i18n %}
{% extends "catalog/base.html" %}

{% block content %}
<main class="page page--catalog">

  <!-- Cabecera / Hero -->
  <section class="hero">
    <div class="hero-inner">
      <div class="hero-text">
        <p class="hero-kicker">{% trans "CATÁLOGO" %}</p>
        <h1 class="hero-title">{% trans "Catálogo retro" %}</h1>
        <p class="hero-subtitle">
          {% blocktrans %}
          Películas clásicas con doblaje original y versiones mejoradas con voces
          generadas por IA para sonar naturales hoy en día, sin perder la esencia
          ochentera.
          {% endblocktrans %}
        </p>
      </div>

      <!-- Patrocinio -->
      <div class="hero-sponsor">
        <span class="hero-sponsor-label">
          {% trans "Patrocinado por" %}
        </span>
        <span class="hero-sponsor-name">
          InstantForgePro
        </span>
      </div>
    </div>
  </section>

  <!-- Listado de pelis -->
  <section class="catalog-section">
    {% if movies %}
      <div class="movie-grid">
        {% for movie in movies %}
          <article class="movie-card">
            <a href="{% url 'movie_detail' movie.pk %}" class="movie-card-link">
              <div class="movie-card-poster-wrapper">
                {% if movie.poster %}
                  <img src="{{ movie.poster.url }}"
                       alt="{{ movie.title }}"
                       class="movie-card-poster">
                {% else %}
                  <div class="movie-card-poster movie-card-poster--placeholder">
                    {% trans "Sin póster" %}
                  </div>
                {% endif %}

                <!-- Badge pequeño en la carátula -->
                <div class="movie-card-badge">
                  {% trans "Audio IA disponible" %}
                </div>
              </div>

              <div class="movie-card-body">
                <div class="movie-card-header">
                  <h2 class="movie-card-title">{{ movie.title }}</h2>
                  <span class="movie-card-year">{{ movie.year }}</span>
                </div>

                {% if movie.genre %}
                  <div class="movie-card-tags">
                    <span class="movie-tag">{{ movie.genre }}</span>
                  </div>
                {% endif %}

                <button type="button" class="movie-card-cta">
                  {% trans "Ver ficha ▶" %}
                </button>
              </div>
            </a>
          </article>
        {% endfor %}
      </div>
    {% else %}
      <div class="empty-state">
        <h2>{% trans "No hay películas aún." %}</h2>
        <p>
          {% blocktrans %}
          Entra en el panel de administración y sube las primeras joyas
          ochenteras para probar el flujo de póster, vídeo y pistas de audio IA.
          {% endblocktrans %}
        </p>
        <a href="/admin/" class="empty-state-btn">
          {% trans "Ir al panel de admin" %}
        </a>
      </div>
    {% endif %}
  </section>

</main>
{% endblock %}
